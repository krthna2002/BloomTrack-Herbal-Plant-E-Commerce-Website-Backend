(()=>{"use strict";function getDeviceInfo_isIOS(){const userAgent=window.navigator.userAgent;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||userAgent.includes("Mac")}const isIPad=/iPad/.test(navigator.userAgent);const queryParamsActions_getQueryParam=(queryParam,currentUrl=window.location.href)=>{const results=new RegExp("[\\?&]"+queryParam+"=([^&#]*)").exec(currentUrl);return results&&results.length>0?decodeURIComponent(results[1]):null},removeQueryParam=(parameter,currentUrl=window.location.href)=>{if(!currentUrl.includes(parameter))return currentUrl;const url=new URL(currentUrl),queryParams=new URLSearchParams(url.search),params={};for(const[key,value]of queryParams)params[key]=value;delete params[parameter];const queryString=Object.entries(params).map((([key,value])=>`${key}=${encodeURIComponent(value)}`)).join("&");url.search=queryString;try{window.history.pushState({},document.title,url.toString())}catch(error){}return url.toString()},getQueryParam_getAppIdFromQueryParam=checkURL=>{const extractAppIdFromPath=()=>{const parts=window.location.pathname.split("/"),appIdIndex=parts.findIndex((item=>"appid"===item));return-1!==appIdIndex?parts[appIdIndex+1]:null};return checkURL||window.location.href.includes("/appid/")?extractAppIdFromPath():queryParamsActions_getQueryParam(Constants_URL_PARAMETER.APP_ID)},getQueryParam_getCodeFromQueryParam=url=>queryParamsActions_getQueryParam(Constants_URL_PARAMETER.CODE,url),getQueryParam_getQrToken=()=>queryParamsActions_getQueryParam(Constants_URL_PARAMETER.QR_TOKEN),getUxModeFromQueryParam=()=>queryParamsActions_getQueryParam(Constants_URL_PARAMETER.UX_MODE);function inIframe_inIframe(){try{return window.self!==window.parent}catch(error){return!0}}const getVersion_getVersion=()=>{let version=queryParamsActions_getQueryParam("v")||"3";const script=document.getElementById("otpless-sdk");return script?version=script.src.split("/v")[1].charAt(0):(navigator.userAgent.includes(" otplesssdk")||(()=>{const splitPath=window.location.pathname.split("/"),path=splitPath[splitPath.length-1],authFlow=!!getQueryParam_getAppIdFromQueryParam(!0);if(authFlow&&("otpless.com"===path||"otpless.tech"===path)){const finalURL=`${window.location.origin}${window.location.search||""}`;try{window.history.pushState({},document.title,finalURL)}catch(error){}}return authFlow})()&&!inIframe_inIframe())&&(version=window.location.href.split("rc")[1].charAt(0)),version},Constants_IFRAME_COMMUNICATION_EXTERNAL_URL="EXTERNAL_URL",Constants_IFRAME_COMMUNICATION_NATIVE_OTP_AUTO_READ="NATIVE_OTP_AUTO_READ",Constants_IFRAME_COMMUNICATION_HEADLESS_REQUEST="HEADLESS_REQUEST",Constants_IFRAME_COMMUNICATION_SESSION_VERIFICATION="SESSION_VERIFICATION",Constants_IFRAME_COMMUNICATION_WEB_AUTH_RESPONSE="WEB_AUTH_RESPONSE",Constants_IFRAME_COMMUNICATION_GET_LOGIN_URI="GET_LOGIN_URI",Constants_IFRAME_COMMUNICATION_LOGOUT_SESSION="LOGOUT_SESSION",Constants_IFRAME_COMMUNICATION_SECURE_DATA="SECURE_DATA",Constants_IFRAME_COMMUNICATION_DOCUMENT_FOCUS_VALIDATION="DOCUMENT_FOCUS_VALIDATION",Constants_IFRAME_COMMUNICATION_GET_ANCESTOR_LOCATION="GET_ANCESTOR_LOCATION",Constants_IFRAME_COMMUNICATION_REMOVE_ANCESTOR_PARAMS="REMOVE_ANCESTOR_PARAMS";var Constants_SDK_EXTERNAL_CALLBACK,Constants_STORAGE,STATUS,Constants_PLATFORM_CONSTANTS,Constants_URL_PARAMETER,Constants_SDK_PLATFORM,Constants_EVENT_NAMES,Constants_SCRIPT_ATTRIBUTES_MAP,DIV_ATTRIBUTES_MAP;!function(SDK_EXTERNAL_CALLBACK){SDK_EXTERNAL_CALLBACK.CANCEL="OTPlessSDKCancelCallback",SDK_EXTERNAL_CALLBACK.EXTERNAL_URL="OTPlessSdkExternalURLCallback",SDK_EXTERNAL_CALLBACK.NO_CHANNEL="OTPlessNoChannelCallback",SDK_EXTERNAL_CALLBACK.VERIFIED_CHANNEL="OTPlessVerifiedChannelCallback",SDK_EXTERNAL_CALLBACK.INIT="OTPlessInitCallback",SDK_EXTERNAL_CALLBACK.OTPLESS="otpless",SDK_EXTERNAL_CALLBACK.VERIFY_SESSION="OTPlessVerifySession",SDK_EXTERNAL_CALLBACK.CLEAR_SESSION="OTPlessLogout",SDK_EXTERNAL_CALLBACK.LOGOUT="OTPlessSDKLogout"}(Constants_SDK_EXTERNAL_CALLBACK||(Constants_SDK_EXTERNAL_CALLBACK={})),function(STORAGE){STORAGE.STATE="state",STORAGE.UID="uid",STORAGE.MID="mid",STORAGE.OTPLESS_COLLAPSED_COUNTER="oc",STORAGE.OTPLESS_HIDDEN_COUNTER="ohc",STORAGE.AVATAR="avatar",STORAGE.INIT="init",STORAGE.OTPLESS_TOKEN="nekoTssel-PTO",STORAGE.HARD_STOP_POLL="hsp",STORAGE.HARD_STOP_POLL_BRIEF="hspb",STORAGE.OTPLESS_LOCALE="OTPlessLocale",STORAGE.CHANNEL="CHANNEL",STORAGE.ASID="asId",STORAGE.INID="inId",STORAGE.TSID="tsId",STORAGE.INTENT_ONETAP_TOKEN="iot",STORAGE.CODE_VERIFICATION="cv",STORAGE.OTPLESS_SESSION="os",STORAGE.OTPLESS_SILENT_AUTH_INFO="osai",STORAGE.BACK_CALLBACK="bcb",STORAGE.SSID="ssId",STORAGE.EVENT_COUNTER="ec"}(Constants_STORAGE||(Constants_STORAGE={})),function(STATUS){STATUS.INACTIVE="INACTIVE",STATUS.INIT="INIT",STATUS.PENDING="PENDING",STATUS.SUCCESS="SUCCESS",STATUS.FAILED="FAILED",STATUS.COMPLETED="COMPLETED"}(STATUS||(STATUS={})),function(PLATFORM_CONSTANTS){PLATFORM_CONSTANTS.DESKTOP="Desktop",PLATFORM_CONSTANTS.ANDROID="Android",PLATFORM_CONSTANTS.IOS="iOS"}(Constants_PLATFORM_CONSTANTS||(Constants_PLATFORM_CONSTANTS={})),function(URL_PARAMETER){URL_PARAMETER.CODE="code",URL_PARAMETER.QR_REF_ID="qr_ref_id",URL_PARAMETER.REF_ID="ref_id",URL_PARAMETER.TOKEN="token",URL_PARAMETER.LOGIN_URI="login_uri",URL_PARAMETER.NATIVE_LOGIN_URI="native_login_uri",URL_PARAMETER.PLATFORM="platform",URL_PARAMETER.FLOATER_COLLAPSED="collapsed",URL_PARAMETER.SDK_PLATFORM="sdkPlatform",URL_PARAMETER.COLLAPSED="collapsed",URL_PARAMETER.TECHSTACK="techstack",URL_PARAMETER.ANNOUNCEMENT="announcement",URL_PARAMETER.BUTTON_EXIST="buttonExist",URL_PARAMETER.HAS_WHATSAPP="hasWhatsapp",URL_PARAMETER.HAS_TRUECALLER="hasTrueCaller",URL_PARAMETER.OTPLESS_ONE_TAP_TOKEN="oToken",URL_PARAMETER.PACKAGE="package",URL_PARAMETER.UX_MODE="uxmode",URL_PARAMETER.RELOAD="true",URL_PARAMETER.SCRIPT_ATTRIBUTES="script_attributes",URL_PARAMETER.IS_CLIENT_USER_LOGGED_IN="isClientUserLogin",URL_PARAMETER.SID="sId",URL_PARAMETER.WEB_AUTHN="webAuthn",URL_PARAMETER.CLIENT_ID="client_id",URL_PARAMETER.CID="cid",URL_PARAMETER.APP_ID="appId",URL_PARAMETER.REDIRECT_URI="redirect_uri",URL_PARAMETER.NONCE="nonce",URL_PARAMETER.IS_LOGIN_PAGE="isLoginPage",URL_PARAMETER.DATA_SET="dataSet",URL_PARAMETER.AMOUNT="amount",URL_PARAMETER.CURRENCY="currency",URL_PARAMETER.IS_MANDATORY="isMandatory",URL_PARAMETER.APP_INFO="appInfo",URL_PARAMETER.HU="hu",URL_PARAMETER.FOM="fom",URL_PARAMETER.NATIVE_LOGIN_PAGE="lp",URL_PARAMETER.LOGIN_TYPE="lt",URL_PARAMETER.CHANNEL="channel",URL_PARAMETER.CROSS_BUTTON_HIDDEN="crossButtonHidden",URL_PARAMETER.LOADER_COLOR="loaderColor",URL_PARAMETER.CROSS_BUTTON_COLOR="closeButtonColor",URL_PARAMETER.LOADING_TEXT="loadingText",URL_PARAMETER.LOADING_TEXT_COLOR="textColor",URL_PARAMETER.QR_TOKEN="qrToken",URL_PARAMETER.IS_HEADLESS="isHeadless",URL_PARAMETER.IS_HEADLESS_ONETAP="plov",URL_PARAMETER.ASID="asId",URL_PARAMETER.UID="uid",URL_PARAMETER.UIID="uiId",URL_PARAMETER.IS_SILENT_AUTH_SUPPORTED="isSilentAuthSupported",URL_PARAMETER.MODE="mode",URL_PARAMETER.ORDER_ID="orderId",URL_PARAMETER.IS_HEADLESS_QR="isHeadlessQR",URL_PARAMETER.MUS_ID="userId",URL_PARAMETER.VERSION="v",URL_PARAMETER.SSO_TOKEN="ssoToken",URL_PARAMETER.SSO_CHANNEL="ssoChannel",URL_PARAMETER.CACHE_SUPPORTED="urlCacheSupported",URL_PARAMETER.CACHE_EPOCH="urlCacheEpoch",URL_PARAMETER.PAUID="pauId"}(Constants_URL_PARAMETER||(Constants_URL_PARAMETER={})),function(SDK_PLATFORM){SDK_PLATFORM.WORDPRESS="WORDPRESS",SDK_PLATFORM.JS="JS",SDK_PLATFORM.LINK="LINK",SDK_PLATFORM.ANDROID="ANDROID",SDK_PLATFORM.IOS="IOS",SDK_PLATFORM.SHOPIFY="SHOPIFY",SDK_PLATFORM.MAGENTO="MAGENTO",SDK_PLATFORM.AUTHLINK="AUTHLINK",SDK_PLATFORM.WEBFLOW="WEBFLOW",SDK_PLATFORM.FLUTTER_WEB="FLUTTER_WEB",SDK_PLATFORM.HEADLESS="HEADLESS"}(Constants_SDK_PLATFORM||(Constants_SDK_PLATFORM={})),function(EVENT_NAMES){EVENT_NAMES.TIMEOUT="TIMEOUT",EVENT_NAMES.TRY_AGAIN="TRY_AGAIN",EVENT_NAMES.IFRAME_FAILED="IFRAME_FAILED",EVENT_NAMES.ONETAP_CREATED="ONETAP_CREATED",EVENT_NAMES.INTENT_CREATED="INTENT_CREATED",EVENT_NAMES.CLIENT_REDIRECTION="CLIENT_REDIRECTION",EVENT_NAMES.INITIALIZED="INITIALIZED",EVENT_NAMES.HEADLESS_READY="HEADLESS_READY",EVENT_NAMES.HEADLESS_REQUEST_NATIVE="HEADLESS_REQUEST_NATIVE",EVENT_NAMES.HEADLESS_REQUEST_WEB="HEADLESS_REQUEST_WEB",EVENT_NAMES.HEADLESS_REQUEST_FALLBACK="HEADLESS_REQUEST_FALLBACK",EVENT_NAMES.HEADLESS_REQUEST="HEADLESS_REQUEST",EVENT_NAMES.API_CALL_INITIATED="API_CALL_INITIATED",EVENT_NAMES.API_CALL_PERFORMANCE="API_CALL_PERFORMANCE",EVENT_NAMES.POLLING_STARTED="POLLING_STARTED",EVENT_NAMES.POLLING_ACTION="POLLING_ACTION",EVENT_NAMES.POLLING_ENDED="POLLING_ENDED",EVENT_NAMES.UNCAUGHT_ERROR="UNCAUGHT_ERROR",EVENT_NAMES.UNHANDLED_PROMISE="UNHANDLED_PROMISE",EVENT_NAMES.NATIVE_SNA_CALLBACK="NATIVE_SNA_CALLBACK",EVENT_NAMES.OTP_AUTO_READ_SUCCESS="OTP_AUTO_READ_SUCCESS",EVENT_NAMES.OTP_AUTO_READ_FAILED="OTP_AUTO_READ_FAILED",EVENT_NAMES.WATCH_OTP_VERIFY="WATCH_OTP_VERIFY",EVENT_NAMES.OTP_AUTO_VERIFY="OTP_AUTO_VERIFY",EVENT_NAMES.HEADLESS_REQUEST_ACK="HEADLESS_REQUEST_ACK"}(Constants_EVENT_NAMES||(Constants_EVENT_NAMES={})),function(SCRIPT_ATTRIBUTES_MAP){SCRIPT_ATTRIBUTES_MAP.IS_MANDATORY="ismandatory",SCRIPT_ATTRIBUTES_MAP.SID="sid",SCRIPT_ATTRIBUTES_MAP.CID="cid",SCRIPT_ATTRIBUTES_MAP.APP_ID="data-appid",SCRIPT_ATTRIBUTES_MAP.SRC="src",SCRIPT_ATTRIBUTES_MAP.USER_SIGNED_IN="usersignedin"}(Constants_SCRIPT_ATTRIBUTES_MAP||(Constants_SCRIPT_ATTRIBUTES_MAP={})),function(DIV_ATTRIBUTES_MAP){DIV_ATTRIBUTES_MAP.TYPE="data-type",DIV_ATTRIBUTES_MAP.BACKGROUND="data-background"}(DIV_ATTRIBUTES_MAP||(DIV_ATTRIBUTES_MAP={}));const LOGIN_PAGE_POPUP_VARIANT_SIDE_CURTAIN="SIDE_CURTAIN",UX_MODE_ANF="anf";var INTENT_TYPE;!function(INTENT_TYPE){INTENT_TYPE.QR="QR",INTENT_TYPE.MOBILE="MOBILE"}(INTENT_TYPE||(INTENT_TYPE={}));const Constants_IS_DESKTOP=window.screen.width>768,ENV_MAP_com=(window.location.href,"https://otpless.com"),Constants_ENV=(()=>{try{return ENV_MAP_com||"https://otpless.com"}catch(error){return"https://otpless.com"}})(),BASE_AUTH_LINK=`${Constants_ENV}/v${getVersion_getVersion()}/auth/index.html`,Constants_isOTPlessApp=navigator.userAgent.includes(" otplessapp"),Constants_isOTPlessSDK=navigator.userAgent.includes(" otplesssdk"),getSdkAsset=path=>`https://otpless.com/sdk-assets/${path}`;path="whatsapp_with_count.svg",getSdkAsset("viber.png"),getSdkAsset("voice-verification.svg"),getSdkAsset("sms-notification.png"),getSdkAsset("email_with_count.svg");var path;async function crudElement_createElement(tagName,attributes,children){const element=document.createElement(tagName);return Object.entries(attributes).map((([key,value])=>{key in attributes&&("onclick"===key?element.onclick=value:"onerror"===key?element.onerror=value:"oninput"===key?element.oninput=value:"innerText"===key?element.innerText=value:element.setAttribute(key,value))})),null==children||children.forEach((child=>{"string"==typeof child?element.appendChild(document.createTextNode(child)):element.appendChild(child)})),element}function crudElement_updateElement(id,attributes){const element=document.getElementById(id);if(element)for(const[key,value]of Object.entries(attributes))attributes.hasOwnProperty(key)&&("onclick"===key?element.onclick=value:"innerText"===key?element.innerText=value:element.setAttribute(key,value))}function crudElement_appendElement(element,parent){if(!parent)return document.body.appendChild(element);if("head"===parent)return document.head.appendChild(element);const elementParent=document.getElementById(parent);elementParent&&elementParent.appendChild(element)}function crudElement_ifElementExist(id){return!!document.getElementById(id)}function getDataSet(id){const hu=queryParamsActions_getQueryParam(Constants_URL_PARAMETER.HU),element=document.getElementById(id);if(!element)return"{}";const dataset={...element.dataset,...hu&&{hu}};return JSON.stringify(dataset)}function removeElement(id){const element=document.getElementById(id);element&&element.remove()}function getAttrfromAttrsMap(attr,id){const queryAttrs=getAllAttrsFromTag(id);return queryAttrs&&attr in queryAttrs?queryAttrs[attr]:""}const getAllAttrsFromTag=id=>{let scriptElement=document.getElementById(id);if(!scriptElement)return;const attributes={};for(let i=0;i<scriptElement.attributes.length;i++){const attribute=scriptElement.attributes[i];attributes[attribute.name]=attribute.value}return attributes},OTPLESS_GENERAL_FLOATER=`${Constants_IS_DESKTOP?"top: 70px; right: 30px; width: 385px;":"left: 0; bottom: 0; right: 0; width: 100%;"}\n  position: fixed;\n  box-shadow: 0 1px 2px 0 rgba(65,69,73,.3), 0 3px 6px 2px rgba(65,69,73,.15);\n  background: #FFF;\n  transition: all 0.5s ease-in-out;\n  font-size: 14px;\n  z-index: 99999999999999999999999;\n`,getLoginPageHeight=()=>{const loginPageDataSet=JSON.parse(getDataSet("otpless-login-page")),hu=(null==loginPageDataSet?void 0:loginPageDataSet.hu)||"";if(hu){return{3:"400px",2:"450px",1:"500px"}[hu.split(",").length]}return Constants_isOTPlessApp||Constants_isOTPlessSDK?"100%":"600px"},commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SCRIPT="otpless-sdk",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME="otpless-floating-frame",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER="otpless-floating-button",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_COLLAPSED_FLOATER_GIF="floating-gif",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV="otpless",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV="otpless-login-page",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME="otpless-login-page-frame",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE="otpless-login-page-button",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_BUTTON_MASK="otpless-button-mask",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_ANNOUNCEMENT_BAR="otpless-annoucement-bar",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FORM="OTPlessForm",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER="full-screen-OTPLess-loader",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOADER_STYLE="otpless-loader-style",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_HIDDEN_FLOATER_CLOSE_IMG="otpless-cross-img",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_BUTTON_WHATSAPP_IMG="otpless-whatsapp-logo",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER="OTPless-Error",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SECURE_JS="otpless-secure-sdk",commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP={PARENT:"otpless-login-page-parent",CHILD:"login-page-popup"},COMMON_AUTH_ELEMENTS_STYLES={OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER:{PARENT:"display: flex; justify-content: space-around; align-items: center; flex-direction: column; height: 100%; width: 100%; padding: 10% 0; box-sizing: border-box;",IMG:"width: 40%",TEXT:{HEADER:"font: 500 1.75rem Google Sans, Roboto, Helvetica, Arial, sans-serif; margin: 0; text-align: center;",TITLE:"font: 300 0.875rem Google Sans, Roboto, Helvetica, Arial, sans-serif; margin: 0; margin-top: 10px; text-align: center; width: 80%; margin:30px auto 0"},ACTION_BUTTON:"border-radius: 6px; background: #3062d4; box-shadow: 0px 1px 2px 0px rgba(27, 36, 44, 0.12); padding: 16px; color: #FFF; font: 500 1.125rem Google Sans, Roboto, Helvetica, Arial, sans-serif; width: 60%; text-align: center; cursor: pointer;"},OTPLESS_LOGIN_PAGE_IFRAME:`height: 100%; width: 100%; border: none; opacity: 0; border-radius: ${Constants_isOTPlessApp||Constants_isOTPlessSDK?0:12}px; margin-bottom: -6px; position: relative; z-index: 1;`,OTPLESS_FLOATER_IFRAME:"width: 100%; border: none; height: 100%; opacity: 0; border-radius: 12px; z-index: 1;",OTPLESS_LOGIN_PAGE:`${Constants_IS_DESKTOP?"border-radius: 12px; width: 390px; min-width: 390px; margin: 0 auto;":"width: 100%; border-radius: 12px;"}\n  transition: all 0.5s ease-in-out;\n  background: #FFF;\n  font-size: 14px;\n  position: relative;`,OTPLESS_FLOATER:{EXPANDED:`${OTPLESS_GENERAL_FLOATER} height: 270px; border-radius: 12px;`,COLLAPSED:`${OTPLESS_GENERAL_FLOATER} display: none`,HIDDEN:`${OTPLESS_GENERAL_FLOATER} opacity: 0; pointer-events: none;`},OTPLESS_COLLAPSED_FLOATER_GIF:"position: absolute; top: -30px; left: 50%; transform: translate(-50%, 0); width: 40px;",OTPLESS_WHATSAPP_LOGIN_IMG:"width: 100%; height: 100%;",OTPLESS_BUTTON_MASK:"width: 100vw; height: 100vh; position: fixed; inset: 0px; \n  background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(2px); display: block; z-index: 99999;",OTPLESS_ANNOUNCEMENT_BAR:"height: 60px; width: 100%; position: sticky; background: rgb(255, 255, 255); \n  z-index: 999999999; transition: all 0.5s ease-in-out 0s; top: 0px;",OTPLESS_WORPRESS_FORM:"display: none;",OTPLESS_WORPRESS_FULL_SCREEN_LOADER:{PARENT:"position: absolute; inset: 0; display: flex; justify-content: center; align-items: center; height: 100%; width: 100%; z-index: 99999; flex-direction: column;",SPAN:"border: 4px solid #f3f3f3; border-radius: 50%; height: 100%; \n    width: 100%; max-height: 40px; max-width: 40px; animation: otpless-spinner 0.8s linear infinite;",TEXT:"font: 300 1rem Google Sans, Roboto, Helvetica, Arial, sans-serif; margin: 0; margin-top: 15px; text-align: center;"},OTPLESS_HIDDEN_FLOATER_CLOSE_IMG:"position: fixed; top: 30px; right: 30px; font-size: 30px;",OTPLESS_NATIVE_SDK_LOGIN_PAGE_DIV:"height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center;",OTPLESS_LOGIN_PAGE_POPUP:{PARENT:"position: fixed; height: 100vh; width: 100vw; display: flex; justify-content: center; align-items: center; inset: 0;",CURTAIN:(background,isDesktop)=>`position: fixed; top: 0; bottom: 0; right: 0; background: ${background||"#FFF"}; width: ${isDesktop?"max(550px, 40%)":"100%"}; display: flex; justify-content: center; align-items: center;`}},commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS={OTPLESS_LOGIN_PAGE_TIMEOUT:{CONTAINER:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER.PARENT},ERROR_LOGO:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER.IMG,src:"https://otpless.com/sdk-assets/try-again.png"},TEXT:{HEADER:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER.TEXT.HEADER,innerText:"Request Timeout"},TITLE:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER.TEXT.TITLE,innerText:"Your request has taken too long to process and has timed out. Please check your network connection and try again."}},ACTION_BUTTON:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER.ACTION_BUTTON,innerText:"Try Again"},BRANDING:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER.IMG,src:"https://otpless.com/sdk-assets/powered-by.svg"}},OTPLESS_LOGIN_PAGE_IFRAME:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_IFRAME,loading:"eager"},OTPLESS_FLOATER_IFRAME:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER_IFRAME,loading:"eager"},OTPLESS_FLOATER:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER},OTPLESS_HIDDEN_FLOATER_CLOSE_IMG:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_HIDDEN_FLOATER_CLOSE_IMG,innerText:"âœ•"},OTPLESS_LOGIN_PAGE:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE},OTPLESS_WHATSAPP_LOGIN_IMG:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_WHATSAPP_LOGIN_IMG,src:"https://d1j61bbz9a40n6.cloudfront.net/whatsapp-button.svg",id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_BUTTON_WHATSAPP_IMG},OTPLESS_COLLAPSED_FLOATER_GIF:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_COLLAPSED_FLOATER_GIF,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_COLLAPSED_FLOATER_GIF},OTPLESS_BUTTON_MASK:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_BUTTON_MASK,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_BUTTON_MASK},OTPLESS_ANNOUNCEMENT_BAR:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_ANNOUNCEMENT_BAR,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_ANNOUNCEMENT_BAR},OTPLESS_LOADER_STYLES:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOADER_STYLE,type:"text/css"},OTPLESS_WORPRESS_FULL_SCREEN_LOADER:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER},OTPLESS_NATIVE_SDK_LOGIN_PAGE_DIV:{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_NATIVE_SDK_LOGIN_PAGE_DIV},OTPLESS_WORPRESS_FORM:{FORM:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FORM,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_WORPRESS_FORM},MOBILE_INPUT:{type:"hidden",name:"waNumber"},NAME_INPUT:{type:"hidden",name:"waName"},EMAIL_INPUT:{type:"hidden",name:"waEmail"},LOGOUT_INPUT:{type:"hidden",name:"logout"}},OTPLESS_LOGIN_PAGE_POPUP:{PARENT:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.PARENT,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_POPUP.PARENT},CHILD:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.CHILD},CURTAIN:(background,isDesktop)=>({style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_POPUP.CURTAIN(background,isDesktop),class:"animated fadeInRight"})},OTPLESS_SECURE_SDK:{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SECURE_JS,src:`${Constants_ENV}/v${getVersion_getVersion()}/secure.js`}},globalFunctions_GLOBAL_FUNCTIONS_SDK_INIT="otplessInit",globalFunctions_GLOBAL_FUNCTIONS_OTPLESS="otpless",globalFunctions_GLOBAL_FUNCTIONS_CLIENT_LOGIN="isClientUserLogin",globalFunctions_GLOBAL_FUNCTIONS_IFRAME_INIT="OTPLessIframeInitialized",globalFunctions_GLOBAL_FUNCTIONS_OTPLESS_USER="otplessUser",globalFunctions_GLOBAL_FUNCTIONS_ANCESTOR_URI_CALLBACK="AncestorURICallback",globalFunctions_GLOBAL_FUNCTIONS_NATIVE={GOOGLE_PHONE_NUMBER_CALLBACK:"googlePopupCallback",OTP_CALLBACK:"nativeOtpCallback",OTP_AUTOREAD:{FN:"NATIVE_OTP_AUTO_READ",SUCCESS:"onOtpReadSuccess",ERROR:"onOtpReadError"},HARD_BACK:"onHardBackPressed",CELLULAR_CALLBACK:"onCellularNetworkResult",JAVASCRIPT_OBJ:"javascript_obj",ANDROID_OBJ:"androidObj",APP_INFO:"getAppInfo",APP_INFO_RESULT:"onAppInfoResult",PHONE_NUMBER:{SUCCESS:"onPhoneNumberSelectionSuccess",ERROR:"onPhoneNumberSelectionError"},WEBAUTHN:{REGISTRATION:{SUCCESS:"onWebAuthnRegistrationSuccess",ERROR:"onWebAuthnRegistrationError"},SIGN_IN:{SUCCESS:"onWebAuthnSigninSuccess",ERROR:"onWebAuthnSigninError"}},SSO:{RESPONSE:"ssoSdkResponse"}},globalFunctions_GLOBAL_FUNCTIONS_HEADLESS={READY:"hr",OTPLESS:"OTPless",RESPONSE:"headlessResponse",REQUEST:"headlessRequest",DELIVERY_CHANNEL:"hdc",POLLING_REQUEST:"hpr"},globalFunctions_GLOBAL_FUNCTIONS_SECURE={OTPLESS:"OTPless",ANALYSIS_RESPONSE:"onSecureAnalysisResponse",OTPLESS_SECURE:"OtplessSecure",WEB:{SUCCESS:"secureDataCallback",ERROR:"secureDataErrorCallback"}},HEADLESS_REQUEST_TYPE_COUNTRY_CODE="COUNTRY_CODE",HEADLESS_REQUEST_TYPE_GET_CONFIG="GET_CONFIG",headless_HEADLESS_RESPONSE_TYPE_ONETAP="ONETAP",HEADLESS_ERROR=(errorLog,responseType="INITIATE")=>{var _a;return{NO_INTERNET:{responseType:"INTERNET_ERR",statusCode:5002,response:{errorMessage:"Internet Error",errorCode:-2,details:{description:"net::ERR_INTERNET_DISCONNECTED"}}},GENERAL:{statusCode:500,responseType,response:{errorCode:500,errorMessage:"Something went wrong! Please try again."}},API_ERROR:{statusCode:(null==errorLog?void 0:errorLog.rateLimit)?429:400,responseType,response:{errorCode:Number((null===(_a=null==errorLog?void 0:errorLog.extras)||void 0===_a?void 0:_a.errorCode)||5004),errorMessage:(null==errorLog?void 0:errorLog.detailsKey)||"Something went wrong! Please try again.",...null==errorLog?void 0:errorLog.extras}},MULTIPLE_CHANNEL:{statusCode:4001,responseType,response:{errorCode:4001,errorMessage:"OTPless headless SDK doesn't support 2FA as of now."}},APP_ID:{responseType,statusCode:401,response:{errorCode:401,errorMessage:"UnAuthorized request! Please check your appId"}},REQUIRED_KEY:{responseType,statusCode:4002,response:{errorCode:4002,errorMessage:"The request parameters are incorrect, see details.",...(null==errorLog?void 0:errorLog.detailsKey)&&{details:{[null==errorLog?void 0:errorLog.detailsKey]:"This field is required."}}}},INVALID_VALUE:{statusCode:4e3,responseType,response:{errorCode:4e3,errorMessage:"The request values are incorrect, see details.",...(null==errorLog?void 0:errorLog.detailsKey)&&{details:{[null==errorLog?void 0:errorLog.detailsKey]:`Please enter the valid ${null==errorLog?void 0:errorLog.detailsKey}`}}}},INVALID_CHANNEL:{statusCode:4003,responseType,response:{errorCode:4003,errorMessage:"The request channel is incorrect, see details.",...(null==errorLog?void 0:errorLog.detailsKey)&&{details:{[null==errorLog?void 0:errorLog.detailsKey]:`${null==errorLog?void 0:errorLog.messageChannel} channel is not active. Please enable it from the OTPLESS Dashboard`}}}}}},iframe_helper_sendMessage=(data,origin)=>window.parent.postMessage(data,origin||"*"),sendMessageToIframe=message=>{var _a;let childIframe=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME);childIframe||(childIframe=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME)),childIframe&&(null===(_a=childIframe.contentWindow)||void 0===_a||_a.postMessage(message,"*"))},reflectoMagic_reflectoMagic=({map=window,key,value},remove)=>remove?Reflect.deleteProperty(map,key):value?Reflect.set(map,key,value):Reflect.get(map,key),encodeCompleteUrl=url=>encodeURIComponent(url).replace(/[!'()*]/g,(char=>encodeURIComponent(char)===char?"%"+char.charCodeAt(0).toString(16).toUpperCase():char)),NativeBridgeHelper_NativeCall=params=>{reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.ANDROID_OBJ}).webNativeAssist(JSON.stringify(params))},getV2LoginPagePath=path=>path.replace("/v1","/v2/lp"),getV3LoginPagePath=path=>path.replace("/v1","/v3/lp");getV3LoginPagePath("/v1/user/transaction/intent"),getV2LoginPagePath("/v1/user/transaction/silent-auth-verify"),getV2LoginPagePath("/v1/user/transaction/silent-auth-pre-check"),getV3LoginPagePath("/v1/user/transaction/silent-auth-status"),getV3LoginPagePath("/v1/user/transaction/status"),getV3LoginPagePath("/v1/user/transaction/otp"),getV2LoginPagePath("/v1/user/transaction/complete"),getV2LoginPagePath("/v1/merchant/config"),(path=>{path.replace("/v1","/v1/lp")})("/v1/merchant/support/ticket"),getV3LoginPagePath("/v1/user/transaction/code"),getV3LoginPagePath("/v1/user/transaction/verify-secure-sdk"),window.location.href,window.location.href;let MEMORY_STORAGE={};async function storage_writeToStorage(data){if(data.value)return(data=>{document.cookie=`${data.key}=${encodeURIComponent(data.value)};path=/; max-age=31536000; SameSite=None; Secure`})(data),await async function(data){return new Promise((resolve=>{var _a;try{MEMORY_STORAGE[data.key]=data.value,"undefined"!=typeof window&&window.localStorage&&(null===(_a=window.localStorage)||void 0===_a||_a.setItem(data.key,data.value))}catch(e){}finally{resolve()}}))}(data)}async function storage_readFromStorage(key){return await async function(key){return new Promise((resolve=>{var _a;try{const memoryValue=MEMORY_STORAGE[key];if(memoryValue)return void resolve(memoryValue);if("undefined"!=typeof window&&window.localStorage)return void resolve(null===(_a=window.localStorage)||void 0===_a?void 0:_a.getItem(key));resolve("")}catch(e){resolve("")}}))}(key)}async function removeFromStorage(key){return await async function(key){return new Promise((resolve=>{var _a;try{delete MEMORY_STORAGE[key],"undefined"!=typeof window&&window.localStorage&&(null===(_a=window.localStorage)||void 0===_a||_a.removeItem(key))}catch(e){}finally{resolve()}}))}(key),(key=>{document.cookie=`${key}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`})(key)}const WEBAUTH_ERROR=({TYPE,message="Something went wrong!"}={})=>({NOT_SUPPORTED:{name:"NOT_SUPPORTED",code:4004,message:"WebAuthn not supported in this browser"},IVALID_REQUEST:{name:"INVALID_REQUEST",code:4005,message:"Challenge cannot be null"},FAILED:{name:`${TYPE}_FAILED`,code:4006,message:"Something went wrong!"},TYPE_INTERRUPTED:{name:"TYPE_INTERRUPTED",code:4007,message},TYPE_NO_CREDENTIAL:{name:"TYPE_NO_CREDENTIAL",code:4008,message},TYPE_UNKNOWN:{name:"TYPE_UNKNOWN",code:4009,message},TYPE_USER_CANCELED:{name:"TYPE_USER_CANCELED",code:4010,message},TYPE_NO_CREATE_OPTIONS:{name:"TYPE_NO_CREATE_OPTIONS",code:4011,message}}),base64urlToBuffer=baseurl64String=>{const padding="=".repeat((4-baseurl64String.length%4)%4),base64=baseurl64String.replace(/-/g,"+").replace(/_/g,"/")+padding,binaryString=atob(base64);return Uint8Array.from(binaryString,(char=>char.charCodeAt(0))).buffer},bufferToBase64url=buffer=>{const binaryString=String.fromCharCode(...new Uint8Array(buffer));return btoa(binaryString).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},serializeCredential=cred=>{if(!cred)return null;const serializedCred={id:cred.id,type:cred.type,rawId:cred.rawId?bufferToBase64url(cred.rawId):null,authenticatorAttachment:cred.authenticatorAttachment,clientExtensionResults:cred.getClientExtensionResults(),response:{clientDataJSON:cred.response.clientDataJSON?bufferToBase64url(cred.response.clientDataJSON):null}};return cred.response instanceof AuthenticatorAttestationResponse?(serializedCred.response.attestationObject=cred.response.attestationObject?bufferToBase64url(cred.response.attestationObject):null,serializedCred.response.authenticatorData=cred.response.getAuthenticatorData()?bufferToBase64url(cred.response.getAuthenticatorData()):null,serializedCred.response.transports=cred.response.getTransports()):cred.response instanceof AuthenticatorAssertionResponse&&(serializedCred.response.authenticatorData=cred.response.authenticatorData?bufferToBase64url(cred.response.authenticatorData):null,serializedCred.response.signature=cred.response.signature?bufferToBase64url(cred.response.signature):null,serializedCred.response.userHandle=cred.response.userHandle?bufferToBase64url(cred.response.userHandle):null),serializedCred},initiateWebAuthn=async(publicKey,TYPE)=>(async publicKey=>{var _a,_b,_c;if(!window.PublicKeyCredential)throw WEBAUTH_ERROR().NOT_SUPPORTED;if(!publicKey)throw WEBAUTH_ERROR().IVALID_REQUEST;return"string"==typeof publicKey&&(publicKey=JSON.parse(publicKey)),publicKey.challenge&&(publicKey.challenge=base64urlToBuffer(publicKey.challenge)),(null===(_a=publicKey.user)||void 0===_a?void 0:_a.id)&&(publicKey.user.id=base64urlToBuffer(publicKey.user.id)),(null===(_b=publicKey.excludeCredentials)||void 0===_b?void 0:_b.length)&&(publicKey.excludeCredentials=publicKey.excludeCredentials.map((cred=>({...cred,id:base64urlToBuffer(cred.id)})))),(null===(_c=publicKey.allowCredentials)||void 0===_c?void 0:_c.length)&&(publicKey.allowCredentials=publicKey.allowCredentials.map((cred=>({...cred,id:base64urlToBuffer(cred.id)})))),publicKey})(publicKey).then((async publicKey=>{const flow="REGISTRATION"===TYPE?"create":"get",cred=await navigator.credentials[flow]({publicKey});if(!cred)throw WEBAUTH_ERROR({TYPE}).FAILED;return serializeCredential(cred)})).catch((err=>err)),registerWebauthn=async publicKey=>await initiateWebAuthn(publicKey,"REGISTRATION"),loginWebauthn=async publicKey=>await initiateWebAuthn(publicKey,"LOGIN"),authorizePayment=async(publicKey,spcData)=>{try{if(spcData.methods[0].data.challenge=base64urlToBuffer(spcData.methods[0].data.challenge),spcData.methods[0].data.credentialIds=spcData.methods[0].data.credentialIds.map((id=>base64urlToBuffer(id))),!PaymentRequest)return loginWebauthn(publicKey);const request=new PaymentRequest(spcData.methods,spcData.paymentDetail);if(!await request.canMakePayment())return loginWebauthn(publicKey);const response=await request.show();return response.complete("success"),serializeCredential(response.details)||response.details}catch(err){throw err}},handleErrorCase=error=>{var _a,_b,_c;if(error="string"==typeof error?JSON.parse(error):error,Constants_isOTPlessSDK){const name=error.name.split(".");error=WEBAUTH_ERROR({message:error.message})[name[name.length-1]]}const error_description=(null===(_c=null===(_b=null===(_a=null==error?void 0:error.message)||void 0===_a?void 0:_a.split)||void 0===_b?void 0:_b.call(_a,"See:"))||void 0===_c?void 0:_c[0])||"Something went wrong! Please try again.";return{error_description:(error.name?`${error.name}: `:"")+error_description,code:error.code}},webAuthnAction=async data=>new Promise((async(resolve,reject)=>{const{data:nromalData,spcData,isRegistration,isSPC}=JSON.parse(data);try{const authFlow=isRegistration?registerWebauthn:isSPC?authorizePayment:loginWebauthn,webAuthnData=await authFlow(nromalData,spcData);if(null==webAuthnData?void 0:webAuthnData.message)return reject(handleErrorCase(webAuthnData));resolve(JSON.stringify(webAuthnData,null,2))}catch(error){reject(handleErrorCase(error))}}));const xorEncrypt=data=>{let result="";for(let i=0;i<data.length;i++)result+=String.fromCharCode(data.charCodeAt(i)^"yeKterceSnoitpircnEsselPTO".charCodeAt(i%26));return result},OTPLessFullScreenLoader=async(parent,children)=>{const loaderColor=queryParamsActions_getQueryParam(Constants_URL_PARAMETER.LOADER_COLOR)||"25d366",OTPLESS_FULL_SCREEN_LOADER_SPAN=await crudElement_createElement("span",{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_WORPRESS_FULL_SCREEN_LOADER.SPAN} border-top-color: #${loaderColor};`}),loaderText=queryParamsActions_getQueryParam(Constants_URL_PARAMETER.LOADING_TEXT),loaderTextColor=queryParamsActions_getQueryParam(Constants_URL_PARAMETER.LOADING_TEXT_COLOR)||"25d366",OTPLESS_FULL_SCREEN_LOADER_TEXT=await crudElement_createElement("p",{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_WORPRESS_FULL_SCREEN_LOADER.TEXT} color: #${loaderTextColor};`,innerText:loaderText}),childerList=[OTPLESS_FULL_SCREEN_LOADER_SPAN];loaderText&&childerList.push(OTPLESS_FULL_SCREEN_LOADER_TEXT),children&&childerList.push(children);crudElement_appendElement(await crudElement_createElement("div",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_WORPRESS_FULL_SCREEN_LOADER,style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_WORPRESS_FULL_SCREEN_LOADER.PARENT}${parent?"":"background: #CCCCCCCC; position: fixed;"}`},childerList),parent)},OTPlessAnfLoader=async()=>{const crossButtonColor=queryParamsActions_getQueryParam(Constants_URL_PARAMETER.CROSS_BUTTON_COLOR)||"fff",CrossButton=await crudElement_createElement("p",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_HIDDEN_FLOATER_CLOSE_IMG,style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_HIDDEN_FLOATER_CLOSE_IMG} color: #${crossButtonColor};`,onclick:FLOATER_CLOSED});OTPLessFullScreenLoader("",CrossButton)},OTPlessFloaterInit=async isCustom=>{document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER)&&removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER);let collapsed=await OTPlessHasFloaterCollapsedProp(!1);if(collapsed)return;(getQueryParam_getQrToken()||OTPlessConstants.OTPlessButtonExist)&&(collapsed=!1);const uxMode=getUxModeFromQueryParam(),src=await OTPlessGenerateIframeSrc();OTPlessConstants.OTPlessIsAnf=isCustom&&window.screen.width<768||uxMode===UX_MODE_ANF,OTPlessConstants.OTPlessIsAnf&&!OTPlessConstants.OTPlessButtonExist&&OTPlessAnfLoader();const OTPlessIframe=await crudElement_createElement("iframe",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_FLOATER_IFRAME,src}),OTPlessFloater=await crudElement_createElement("div",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_FLOATER,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.HIDDEN},[OTPlessIframe]);setTimeout((()=>{OTPLessFullScreenLoader(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER),crudElement_appendElement(OTPlessFloater)}),100)},FLOATER_CLOSED=()=>{const OTPlessSDKCancelCallback=reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.CANCEL});removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER),OTPlessSDKCancelCallback?OTPlessSDKCancelCallback():OTPlessRemoveFloater()},removeCollapsedProps=async()=>{!function(id){const element=document.getElementById(id);element&&(element.innerHTML="",element.style.cssText="")}(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_ANNOUNCEMENT_BAR),await removeFromStorage(Constants_STORAGE.OTPLESS_COLLAPSED_COUNTER),await removeFromStorage(Constants_STORAGE.OTPLESS_HIDDEN_COUNTER),removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_COLLAPSED_FLOATER_GIF);const src=await OTPlessGenerateIframeSrc();crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.EXPANDED}),crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME,{src:removeQueryParam(OTPlessConstants.FINAL_COLLPASED_QUERY_PARAM,src)})},OTPlessRemoveFloater=async()=>{document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.PARENT)&&removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.PARENT),removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER),OTPlessConstants.OTPlessSdkPlatform!==Constants_SDK_PLATFORM.HEADLESS&&removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_BUTTON_MASK),removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_HIDDEN_FLOATER_CLOSE_IMG)},OTPlessHasFloaterCollapsedProp=async onclick=>{const oc=parseInt(await storage_readFromStorage(Constants_STORAGE.OTPLESS_COLLAPSED_COUNTER)||"0");if(oc)return!((new Date).getTime()>Number(oc))||(removeCollapsedProps(),!1);if(onclick&&OTPlessConstants.OTPlessSdkPlatform!==Constants_SDK_PLATFORM.HEADLESS&&!OTPlessConstants.OTPlessButtonExist){function getDurationInMilliseconds(count){const day=864e5,durations=[day/6,day,7*day,28*day];return`${durations[Math.min(count-1,durations.length-1)]+(new Date).getTime()}`}let hideCount=parseInt(localStorage.getItem(Constants_STORAGE.OTPLESS_HIDDEN_COUNTER)||"0")+1;localStorage.setItem(Constants_STORAGE.OTPLESS_HIDDEN_COUNTER,hideCount.toString());const value=getDurationInMilliseconds(hideCount);storage_writeToStorage({key:Constants_STORAGE.OTPLESS_COLLAPSED_COUNTER,value})}return!1};const OTPlessReceiveMessage=e=>{var _a;const{data}=e,{event=""}=data,hasParent=inIframe_inIframe,eventMaps={INITIALIZE:()=>{const{showFloater,removeFloater}=data;if(reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_IFRAME_INIT,value:!0}),removeFloater)return OTPlessRemoveFloater();if(OTPlessConstants.OTPlessSdkPlatform===Constants_SDK_PLATFORM.HEADLESS&&!1===showFloater)return void crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.HIDDEN});(()=>{const floater=document.querySelectorAll('[id="otpless-floating-button"]'),lp=document.querySelectorAll('[id="otpless-login-page-frame"]');if(floater.length>1)for(let i=1;i<floater.length;i++)floater[i].remove();if(lp.length>1)for(let i=1;i<lp.length;i++)lp[i].remove()})();const OTPlessInitCallback=reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.INIT});null==OTPlessInitCallback||OTPlessInitCallback();const IFRAME=OTPlessConstants.OTPlessLoginPageExist?commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME,PRODUCT=OTPlessConstants.OTPlessLoginPageExist?commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,MobileSDKFom=Constants_isOTPlessSDK&&!OTPlessConstants.OTPlessLoginPageExist;if(document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.PARENT)&&(crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME,{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_IFRAME}; opacity: 1;`}),crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.HIDDEN})),!OTPlessConstants.OTPlessLoginPageExist&&!MobileSDKFom&&OTPlessConstants.OTPlessButtonExist&&window.screen.width<768){const hideFloater=()=>{if(!1===showFloater){OTPlessAnfLoader();const floater=document.getElementById(PRODUCT);floater&&(floater.style.cssText+="opacity: 0; pointer-events: none")}};if(showFloater?crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.EXPANDED}):hideFloater(),!showFloater)return}if((MobileSDKFom&&!0===showFloater||!1===showFloater)&&(crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER[showFloater?"EXPANDED":"HIDDEN"]}),!showFloater))return;const count=document.querySelectorAll(`#${commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER}`).length;for(let index=0;index<count;index++){const loader=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER);loader&&!OTPlessConstants.OTPlessIsAnf&&loader.remove()}showFloater&&!OTPlessConstants.OTPlessLoginPageExist&&crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.EXPANDED});var otplessLoginPage=document.getElementById(PRODUCT);if(otplessLoginPage){var loaderElement=otplessLoginPage.querySelector(`#${commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER}`);loaderElement&&(showFloater||OTPlessConstants.OTPlessLoginPageExist)&&otplessLoginPage.removeChild(loaderElement)}const iframe=document.getElementById(IFRAME);iframe&&(iframe.style.cssText+="opacity: 1")},OTPLESS_USER:async()=>{var _a;const{otplessUser={},restrictForwarding=!1}=data;if(await removeLoginPagePopup(),otplessUser.redirectUri&&window.location.href.includes("/activate"))return window.open(otplessUser.redirectUri,"_self");if(OTPlessConstants.OTPlessIsAnf||removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_OTPLESS_USER,value:otplessUser}),OTPlessConstants.OTPlessSdkPlatform!==Constants_SDK_PLATFORM.LINK&&removeQueryParam(Constants_URL_PARAMETER.QR_REF_ID),restrictForwarding&&!Constants_isOTPlessSDK&&!Constants_isOTPlessApp)return;OTPlessConstants.OTPlessCallbackAction(otplessUser);if(OTPlessConstants.OTPlessSdkPlatform===Constants_SDK_PLATFORM.HEADLESS&&otplessUser.responseType===headless_HEADLESS_RESPONSE_TYPE_ONETAP&&(window.removeEventListener("message",OTPlessReceiveMessage,!1),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_HEADLESS.READY},!0)),Constants_isOTPlessSDK)return;const sessionInfo=otplessUser.sessionInfo||(null===(_a=otplessUser.response)||void 0===_a?void 0:_a.sessionInfo);return sessionInfo&&await storage_writeToStorage({key:Constants_STORAGE.OTPLESS_SESSION,value:xorEncrypt(JSON.stringify(sessionInfo))}),OTPlessConstants.OTPlessButtonExist||OTPlessConstants.OTPlessSdkPlatform===Constants_SDK_PLATFORM.HEADLESS&&otplessUser.responseType===headless_HEADLESS_RESPONSE_TYPE_ONETAP?OTPlessRemoveFloater():void 0},MANAGE_DIMENSIONS:()=>{const{collapsed=!1,gif="",crossClicked=!1,height}=data;if(height&&crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV,{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE} height: ${height}px`}),!(function(id,attribute){var _a;const element=document.getElementById(id);return element&&null!==(_a=element.getAttribute(attribute))&&void 0!==_a?_a:""}(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SCRIPT,Constants_SCRIPT_ATTRIBUTES_MAP.IS_MANDATORY)&&getQueryParam_getQrToken()||getQueryParam_getQrToken()))return Constants_isOTPlessSDK?crossClicked?FLOATER_CLOSED():null:collapsed?(OTPlessHasFloaterCollapsedProp(!0),OTPlessRemoveFloater()):void(gif?(async(collapsed,gifSrc)=>{if(getAttrfromAttrsMap(Constants_SCRIPT_ATTRIBUTES_MAP.IS_MANDATORY,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SCRIPT))return;removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_COLLAPSED_FLOATER_GIF),crudElement_appendElement(await crudElement_createElement("img",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_COLLAPSED_FLOATER_GIF,src:gifSrc}),commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER),collapsed&&crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,{style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_FLOATER.COLLAPSED})})(!1,gif):removeCollapsedProps())},EXTERNAL_URL:()=>{let{url="",internalRoute=!1,inAppBrowser=!1}=data;if(!url)return;if(Constants_IS_DESKTOP&&OTPlessConstants.OTPlessSdkPlatform===Constants_SDK_PLATFORM.HEADLESS&&url.includes("&channel=WHATSAPP"))return void OTPlessLoginPageAsPopup(`${url}&${Constants_URL_PARAMETER.IS_HEADLESS_QR}=true`.replace("/appid",`/rc${getVersion_getVersion()}/appid`));const OTPlessSdkExternalURLCallback=reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.EXTERNAL_URL});if(hasParent())iframe_helper_sendMessage({event:Constants_IFRAME_COMMUNICATION_EXTERNAL_URL,url,internalRoute,inAppBrowser});else{if(OTPlessSdkExternalURLCallback&&(Constants_isOTPlessApp||Constants_isOTPlessSDK)&&!internalRoute)return OTPlessSdkExternalURLCallback(url,inAppBrowser);try{setTimeout((()=>{window.open(url,internalRoute?"_blank":"_self")}),500)}catch(error){}}},NO_CHANNEL_CALLBACK:()=>{const OTPlessNoChannelCallback=reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.NO_CHANNEL});null==OTPlessNoChannelCallback||OTPlessNoChannelCallback()},FLOATER_CLOSED,VERIFIED_CHANNEL:()=>{const{channelDetails}=data,OTPlessVerifiedChannelCallback=reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.VERIFIED_CHANNEL});null==OTPlessVerifiedChannelCallback||OTPlessVerifiedChannelCallback(channelDetails)},GET_PHONE_NUMBER_POPUP:async()=>{var _a;const phoneNumber=await new Promise((async(resolve,reject)=>{Constants_isOTPlessSDK?(reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.PHONE_NUMBER.SUCCESS,value:resolve}),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.PHONE_NUMBER.ERROR,value:reject}),NativeBridgeHelper_NativeCall({key:18})):resolve("")})),childIframe=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME);childIframe&&(null===(_a=childIframe.contentWindow)||void 0===_a||_a.postMessage(`${phoneNumber}`,"*"))},NATIVE_OTP_AUTO_READ:async()=>{if(hasParent())return void iframe_helper_sendMessage({event:Constants_IFRAME_COMMUNICATION_NATIVE_OTP_AUTO_READ});const otp=await(otpread=!0,new Promise((async resolve=>{if(getDeviceInfo_isIOS())return resolve({error:"NOT_SUPPORTED"});if(Constants_isOTPlessApp||Constants_isOTPlessSDK){const fallback=error=>{NativeBridgeHelper_NativeCall({key:16,otpread:!1}),resolve({error})};reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.OTP_AUTOREAD.SUCCESS,value:otp=>{resolve({otp})}}),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.OTP_AUTOREAD.ERROR,value:fallback}),NativeBridgeHelper_NativeCall({key:16,otpread}),NativeBridgeHelper_NativeCall({key:45,type:"zerotap"})}else{if(!otpread||!("OTPCredential"in window))return resolve({error:"OTPCredential not supported"});try{const abortController=new AbortController,content=await navigator.credentials.get({otp:{transport:["sms"]},signal:abortController.signal});if(content&&"code"in content){const otp=(null==content?void 0:content.code)||"";resolve({otp})}}catch(error){const errorName="AbortError"===(null==error?void 0:error.name)?"OTP retrieval was cancelled.":`An error occurred while retrieving the OTP: ${error}`;console.error(errorName),resolve({error:errorName})}}})));var otpread;sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_NATIVE_OTP_AUTO_READ,otp}))},HEADLESS_RESPONSE:()=>{const{response}=data,headlessResponse=reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_HEADLESS.RESPONSE});null==headlessResponse||headlessResponse(response)},SESSION_VERIFICATION:()=>{const{response}=data,sessionVerificationResponse=reflectoMagic_reflectoMagic({key:Constants_IFRAME_COMMUNICATION_SESSION_VERIFICATION});null==sessionVerificationResponse||sessionVerificationResponse(response)},GET_LOGIN_URI:()=>{hasParent()?iframe_helper_sendMessage({event:Constants_IFRAME_COMMUNICATION_GET_ANCESTOR_LOCATION}):sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_GET_LOGIN_URI,url:window.location}))},WEB_AUTH:async()=>{const{response}=data,sendResponse=webAuthnData=>sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_WEB_AUTH_RESPONSE,webAuthnData}));try{sendResponse(await webAuthnAction(response))}catch(error){sendResponse(error)}},LOGOUT_SESSION:async()=>{const{response}=data;await removeFromStorage(Constants_STORAGE.OTPLESS_SESSION);const sessionVerificationResponse=reflectoMagic_reflectoMagic({key:Constants_IFRAME_COMMUNICATION_LOGOUT_SESSION});null==sessionVerificationResponse||sessionVerificationResponse(response)},HEADLESS_READY:()=>{reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_HEADLESS.READY,value:!0})},SECURE_DATA:async()=>{const{asId}=data,secure=reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_SECURE.OTPLESS_SECURE});if(!secure)return sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_SECURE_DATA,errorMessage:"Secure SDK not loaded!"}));const secureData=await secure(asId);sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_SECURE_DATA,secureData}))},DOCUMENT_FOCUS_VALIDATION:async()=>{const hasFocus=await(async()=>new Promise(((resolve,reject)=>{try{setTimeout((()=>{resolve(document.hasFocus())}),1e3)}catch(error){reject(!1)}})))();sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_DOCUMENT_FOCUS_VALIDATION,hasFocus}))},ANCESTOR_LOCATION:()=>{const{location}=data;reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_ANCESTOR_URI_CALLBACK})(JSON.parse(location)),sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_GET_LOGIN_URI,url:JSON.parse(location)}))},ANCESTOR_OTP_AUTO_READ:()=>{const{otp}=data;sendMessageToIframe(JSON.stringify({event:Constants_IFRAME_COMMUNICATION_NATIVE_OTP_AUTO_READ,otp}))}};null===(_a=eventMaps[event])||void 0===_a||_a.call(eventMaps)},sessionActions=event=>new Promise((async resolve=>{const initiateRequest=async()=>{const sessionData=await storage_readFromStorage(Constants_STORAGE.OTPLESS_SESSION),message={event,sessionData};sendMessageToIframe(JSON.stringify(message)),reflectoMagic_reflectoMagic({key:event,value:resolve})};if(document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME))return await initiateRequest();await OTPlessFloaterInit(),await initiateRequest()})),verifySessionDetails=()=>sessionActions("SESSION_VERIFICATION"),clearSessionDetails=()=>sessionActions("LOGOUT_SESSION");class OTPlessConstants{static get OTPlessCallbackAction(){return this._OTPlessCallbackAction}static set OTPlessCallbackAction(value){this._OTPlessCallbackAction=value}static get OTPlessButtonExist(){return this._OTPlessButtonExist}static set OTPlessButtonExist(value){this._OTPlessButtonExist=value}static get OTPlessLoginPageExist(){return this._OTPlessLoginPageExist}static set OTPlessLoginPageExist(value){this._OTPlessLoginPageExist=value}static get OTPlessSdkPlatform(){return this._OTPlessSdkPlatform}static set OTPlessSdkPlatform(value){this._OTPlessSdkPlatform=value}static get OTPlessIsAnf(){return this._OTPlessIsAnf}static set OTPlessIsAnf(value){this._OTPlessIsAnf=value}static get hasOTPlessCurtainLoginPage(){return this._hasOTPlessCurtainLoginPage}static set hasOTPlessCurtainLoginPage(value){this._hasOTPlessCurtainLoginPage=value}static get FINAL_COLLPASED_QUERY_PARAM(){return this._FINAL_COLLPASED_QUERY_PARAM}static set FINAL_COLLPASED_QUERY_PARAM(value){this._FINAL_COLLPASED_QUERY_PARAM=value}static get isClientUserLogin(){return this._isClientUserLogin}}OTPlessConstants._OTPlessCallbackAction=()=>{},OTPlessConstants._OTPlessButtonExist=!1,OTPlessConstants._OTPlessLoginPageExist=!1,OTPlessConstants._OTPlessSdkPlatform="",OTPlessConstants._OTPlessIsAnf=!1,OTPlessConstants._hasOTPlessCurtainLoginPage=!1,OTPlessConstants._FINAL_COLLPASED_QUERY_PARAM=Constants_URL_PARAMETER.COLLAPSED,OTPlessConstants._isClientUserLogin=reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_CLIENT_LOGIN});const OTPlessAssignConstants=async(callbackAction,sdkPlatform)=>{OTPlessConstants.OTPlessCallbackAction=callbackAction,OTPlessConstants.OTPlessSdkPlatform=sdkPlatform,window.addEventListener("message",OTPlessReceiveMessage,!1),OTPlessConstants.OTPlessLoginPageExist=crudElement_ifElementExist(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV)||crudElement_ifElementExist(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV)||!!queryParamsActions_getQueryParam(Constants_URL_PARAMETER.NATIVE_LOGIN_PAGE),OTPlessConstants.OTPlessButtonExist=crudElement_ifElementExist(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV),OTPlessConstants.hasOTPlessCurtainLoginPage=getAttrfromAttrsMap(DIV_ATTRIBUTES_MAP.TYPE,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV)===LOGIN_PAGE_POPUP_VARIANT_SIDE_CURTAIN,OTPlessConstants.FINAL_COLLPASED_QUERY_PARAM=OTPlessConstants.OTPlessSdkPlatform===Constants_SDK_PLATFORM.WEBFLOW?Constants_URL_PARAMETER.ANNOUNCEMENT:Constants_URL_PARAMETER.COLLAPSED,reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.VERIFY_SESSION,value:verifySessionDetails}),reflectoMagic_reflectoMagic({key:Constants_SDK_EXTERNAL_CALLBACK.CLEAR_SESSION,value:clearSessionDetails})},OTPlessLoginPageInit=async customSrc=>{customSrc||(removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_TIMEOUT_CONTAINER),OTPlessRemoveFloater());document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME)&&removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME);const src=customSrc||await OTPlessGenerateIframeSrc(),OTPlessIframe=await crudElement_createElement("iframe",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_IFRAME,style:COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE_IFRAME,src,onerror});crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV,{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE} height: ${getLoginPageHeight()}; ${customSrc?"background: transparent":""}`}),setTimeout((()=>{OTPLessFullScreenLoader(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV),crudElement_appendElement(OTPlessIframe,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV)}),100),setTimeout(OTPlessTimeout,18e3)},OTPlessLoginPageAsPopup=async src=>{const OTPlessLoginPageDiv=await crudElement_createElement("div",{id:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV});OTPlessConstants.hasOTPlessCurtainLoginPage=getAttrfromAttrsMap(DIV_ATTRIBUTES_MAP.TYPE,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV)===LOGIN_PAGE_POPUP_VARIANT_SIDE_CURTAIN;const OTPlessLoginPageCurtainDiv=await crudElement_createElement("div",(hasCurtain=OTPlessConstants.hasOTPlessCurtainLoginPage,background=getAttrfromAttrsMap(DIV_ATTRIBUTES_MAP.BACKGROUND,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV),isDesktop=Constants_IS_DESKTOP,{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_POPUP.CHILD,...hasCurtain&&commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_POPUP.CURTAIN(background,isDesktop)}),[OTPlessLoginPageDiv]);var hasCurtain,background,isDesktop;const OTPlessButtonMask=await crudElement_createElement("div",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_BUTTON_MASK,onclick:removeLoginPagePopup});crudElement_appendElement(await crudElement_createElement("div",commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_POPUP.PARENT,[OTPlessButtonMask,OTPlessLoginPageCurtainDiv])),crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_BUTTON_MASK,{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_BUTTON_MASK} z-index: 0`}),crudElement_updateElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV,{style:`${COMMON_AUTH_ELEMENTS_STYLES.OTPLESS_LOGIN_PAGE} z-index: 1`});let url=await OTPlessGenerateIframeSrc();src&&(url=new URL(src),url.searchParams.delete(Constants_URL_PARAMETER.REDIRECT_URI),url=url.href),await OTPlessLoginPageInit(url)},removeLoginPagePopup=()=>{const LoginPage=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.CHILD);if(!LoginPage)return;let timeout=0;OTPlessConstants.hasOTPlessCurtainLoginPage&&(LoginPage.classList.remove("fadeInRight"),LoginPage.classList.add("fadeOutRight"),timeout=500),setTimeout((()=>{removeElement(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_POPUP.PARENT)}),timeout)},OTPlessTimeout=async()=>{if(reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_IFRAME_INIT}))return;await(async()=>{const PRODUCT=OTPlessConstants.OTPlessLoginPageExist?commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER,productLoader=document.querySelector(`#${PRODUCT} #${commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER}`),loader=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_WORPRESS_FULL_SCREEN_LOADER);loader&&loader.remove(),productLoader&&productLoader.remove()})();removeElement(OTPlessConstants.OTPlessLoginPageExist?commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_IFRAME:commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER_IFRAME);const TimeoutErrorImg=await crudElement_createElement("img",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_TIMEOUT.ERROR_LOGO}),TimeoutHeader=await crudElement_createElement("p",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_TIMEOUT.TEXT.HEADER}),TimeoutTitle=await crudElement_createElement("p",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_TIMEOUT.TEXT.TITLE}),TimeoutTextContainer=await crudElement_createElement("div",{},[TimeoutHeader,TimeoutTitle]),TimeoutActionButton=await crudElement_createElement("div",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_TIMEOUT.ACTION_BUTTON,onclick:()=>{OTPlessLoginPageInit()}}),TimeoutOTPlessBranding=await crudElement_createElement("img",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_TIMEOUT.BRANDING});crudElement_appendElement(await crudElement_createElement("div",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOGIN_PAGE_TIMEOUT.CONTAINER},[TimeoutErrorImg,TimeoutTextContainer,TimeoutActionButton,TimeoutOTPlessBranding]),commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOGIN_PAGE_DIV)},OTPlessGenerateIframeSrc=async()=>{let ancestorUrl=window.location.href;if(inIframe_inIframe()){const url=await async function(){return new Promise((async value=>{reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_ANCESTOR_URI_CALLBACK,value}),iframe_helper_sendMessage({event:Constants_IFRAME_COMMUNICATION_GET_ANCESTOR_LOCATION})}))}();(null==url?void 0:url.href)&&(ancestorUrl=url.href)}const queryParams={IS_HEADLESS:OTPlessConstants.OTPlessSdkPlatform===Constants_SDK_PLATFORM.HEADLESS,SDK_PLATFORM:OTPlessConstants.OTPlessSdkPlatform,BUTTON_EXIST:OTPlessConstants.OTPlessButtonExist,APP_INFO:await new Promise((resolve=>{const appDetails=reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.APP_INFO});if(appDetails)return resolve(appDetails);const resolveParsedJson=appInfo=>{if(!appInfo)return resolve("");"string"!=typeof appInfo&&(appInfo=JSON.stringify(appInfo)),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.APP_INFO,value:appInfo}),resolve(appInfo)};if(Constants_isOTPlessApp)return resolveParsedJson(reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.APP_INFO}));Constants_isOTPlessSDK&&(reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_NATIVE.APP_INFO_RESULT,value:resolveParsedJson}),NativeBridgeHelper_NativeCall({key:8}),!getDeviceInfo_isIOS())||resolve("")})),CODE:getQueryParam_getCodeFromQueryParam(ancestorUrl),UIID:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.UIID),UID:queryParamsActions_getQueryParam(Constants_STORAGE.UID),UX_MODE:getUxModeFromQueryParam(),QR_TOKEN:getQueryParam_getQrToken(),HAS_WHATSAPP:isIPad?null:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.HAS_WHATSAPP),ASID:queryParamsActions_getQueryParam(Constants_STORAGE.ASID),REDIRECT_URI:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.REDIRECT_URI)||queryParamsActions_getQueryParam("redirectUri")||"",NONCE:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.NONCE),CROSS_BUTTON_HIDDEN:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.CROSS_BUTTON_HIDDEN),FOM:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.FOM),CHANNEL:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.CHANNEL),APP_ID:getAttrfromAttrsMap(Constants_SCRIPT_ATTRIBUTES_MAP.APP_ID,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SCRIPT)||getQueryParam_getAppIdFromQueryParam(),NATIVE_LOGIN_URI:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.LOGIN_URI),PACKAGE:queryParamsActions_getQueryParam(Constants_URL_PARAMETER.PACKAGE),VERSION:getAttrfromAttrsMap(Constants_SCRIPT_ATTRIBUTES_MAP.SRC,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SCRIPT).split("/v")[1].charAt(0)},REMOVE_LIST=[Constants_URL_PARAMETER.CODE,Constants_URL_PARAMETER.FOM,Constants_STORAGE.ASID,Constants_URL_PARAMETER.UIID,Constants_STORAGE.UID,Constants_URL_PARAMETER.CHANNEL];Constants_isOTPlessSDK||REMOVE_LIST.push(Constants_URL_PARAMETER.UX_MODE);let otplessIframeSrc=`${BASE_AUTH_LINK}?${Constants_URL_PARAMETER.LOGIN_URI}=${encodeCompleteUrl(((params,currentHref=window.location.href)=>{let url=currentHref;return params.forEach((param=>url=removeQueryParam(param,url))),url})(REMOVE_LIST))}&${Constants_URL_PARAMETER.IS_LOGIN_PAGE}=${OTPlessConstants.OTPlessLoginPageExist}`;return inIframe_inIframe()&&async function(parameters){iframe_helper_sendMessage({event:Constants_IFRAME_COMMUNICATION_REMOVE_ANCESTOR_PARAMS,parameters})}(REMOVE_LIST),Object.entries(queryParams).forEach((([key,value])=>{otplessIframeSrc=((url,key,value)=>value?`${url}&${Constants_URL_PARAMETER[key]}=${encodeURIComponent(value)}`:url)(otplessIframeSrc,key,value)})),otplessIframeSrc},OTPlessGetDiv=async()=>{if(OTPlessConstants.OTPlessButtonExist)return await(async()=>{const otplessDiv=document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_DIV);if(!otplessDiv)return;otplessDiv.onclick=()=>OTPlessLoginPageAsPopup();const code=getQueryParam_getCodeFromQueryParam(),qr_ref_id=getQueryParam_getQrToken(),uxMode=getUxModeFromQueryParam();(code||qr_ref_id||uxMode)&&OTPlessLoginPageAsPopup()})();if(OTPlessConstants.OTPlessLoginPageExist)return await OTPlessLoginPageInit();if(void 0!==OTPlessConstants.isClientUserLogin){const oToken=await storage_readFromStorage(Constants_STORAGE.OTPLESS_TOKEN);if(OTPlessConstants.isClientUserLogin){if(!oToken)return}else await removeFromStorage(Constants_STORAGE.OTPLESS_TOKEN)}await OTPlessFloaterInit()},initaterequest=async(req,value)=>{await new Promise((resolve=>{document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_FLOATER)||init();const checkWindowHr=()=>reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_HEADLESS.READY})?resolve(!0):requestAnimationFrame(checkWindowHr);requestAnimationFrame(checkWindowHr)})),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_HEADLESS.RESPONSE,value});const message=JSON.stringify({event:Constants_IFRAME_COMMUNICATION_HEADLESS_REQUEST,request:JSON.stringify({...req})});sendMessageToIframe(message)};class OTPless{constructor(callback){this.initiate=requestJSON=>new Promise(((resolve,reject)=>{(requestJSON.otp||requestJSON.code)&&reject({success:!1,...HEADLESS_ERROR({detailsKey:"channel"}).INVALID_CHANNEL}),initaterequest(requestJSON,resolve)})),this.verify=requestJSON=>new Promise(((resolve,reject)=>{requestJSON.otp||requestJSON.code||reject({success:!1,...HEADLESS_ERROR({detailsKey:"channel"}).INVALID_CHANNEL}),initaterequest(requestJSON,resolve)})),this.getCountryCodes=()=>new Promise((resolve=>initaterequest({channel:HEADLESS_REQUEST_TYPE_COUNTRY_CODE},resolve))),this.getConfig=()=>new Promise((resolve=>initaterequest({channel:HEADLESS_REQUEST_TYPE_GET_CONFIG},resolve))),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_OTPLESS,value:callback})}}const OTPlessCallbackAction=async otplessUser=>{const otpless=reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_OTPLESS});null==otpless||otpless(otplessUser)},init=()=>{reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_HEADLESS.OTPLESS,value:OTPless}),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_OTPLESS_USER},!0),reflectoMagic_reflectoMagic({key:globalFunctions_GLOBAL_FUNCTIONS_SDK_INIT,value:init}),(async(callbackAction,sdkPlatform)=>{document.getElementById(commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_LOADER_STYLE)||crudElement_appendElement(await crudElement_createElement("style",{...commonAuth_COMMON_AUTH_ELEMENTS_GENERAL_ATTRS.OTPLESS_LOADER_STYLES},["\n@keyframes otpless-spinner {\n  0% {\n      transform: rotate(0deg);\n  }\n\n  100% {\n      transform: rotate(360deg);\n  }\n}\n\n.animated {\n\t-webkit-animation-duration: 0.5s;\n\tanimation-duration: 0.5s;\n\t-webkit-animation-fill-mode: backwards;\n\tanimation-fill-mode: backwards;\n}\n\n@-webkit-keyframes fadeOutRight {\n\tfrom {\n\t\topacity: 1;\n\t}\n\n\tto {\n\t\topacity: 0;\n\t\t-webkit-transform: translate3d(100%, 0, 0);\n\t\ttransform: translate3d(100%, 0, 0);\n\t}\n}\n\n@keyframes fadeOutRight {\n\tfrom {\n\t\topacity: 1;\n\t}\n\n\tto {\n\t\topacity: 0;\n\t\t-webkit-transform: translate3d(100%, 0, 0);\n\t\ttransform: translate3d(100%, 0, 0);\n\t}\n}\n\n.fadeOutRight {\n\t-webkit-animation-name: fadeOutRight;\n\tanimation-name: fadeOutRight;\n}\n\n@-webkit-keyframes fadeInRight {\n\tfrom {\n\t\topacity: 0;\n\t\t-webkit-transform: translate3d(100%, 0, 0);\n\t\ttransform: translate3d(100%, 0, 0);\n\t}\n\n\tto {\n\t\topacity: 1;\n\t\t-webkit-transform: translate3d(0, 0, 0);\n\t\ttransform: translate3d(0, 0, 0);\n\t}\n}\n\n@keyframes fadeInRight {\n\tfrom {\n\t\topacity: 0;\n\t\t-webkit-transform: translate3d(100%, 0, 0);\n\t\ttransform: translate3d(100%, 0, 0);\n\t}\n\n\tto {\n\t\topacity: 1;\n\t\t-webkit-transform: translate3d(0, 0, 0);\n\t\ttransform: translate3d(0, 0, 0);\n\t}\n}\n\n.fadeInRight {\n\t-webkit-animation-name: fadeInRight;\n\tanimation-name: fadeInRight;\n}\n"]));"true"!==getAttrfromAttrsMap(Constants_SCRIPT_ATTRIBUTES_MAP.USER_SIGNED_IN,commonAuth_COMMON_AUTH_ELEMENTS_ID_OTPLESS_SCRIPT)&&(await OTPlessAssignConstants(callbackAction,sdkPlatform),await OTPlessGetDiv())})(OTPlessCallbackAction,Constants_SDK_PLATFORM.HEADLESS)};init()})();